local on = false
local teleportercheck = false

local function CreateInstance(cls, props)
	local inst = Instance.new(cls)
	
	for i, v in pairs(props) do
		inst[i] = v
	end
	
	return inst
end
	
local exploitScreenGui = CreateInstance('ScreenGui', {
	DisplayOrder = 0,
	Enabled = true,
	ResetOnSpawn = true,
	Name = 'exploitScreenGui',
	Parent = game.CoreGui
})

local toggleFrame = CreateInstance('Frame', {
	Style = Enum.FrameStyle.Custom,
	Active = true,
	AnchorPoint = Vector2.new(0, 0),
	BackgroundColor3 = Color3.new(0.12549, 0.12549, 0.12549),
	BackgroundTransparency = 0,
	BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843),
	BorderSizePixel = 1,
	ClipsDescendants = false,
	Draggable = true,
	Position = UDim2.new(0, 0, 0, 0),
	Rotation = 0,
	Selectable = false,
	Size = UDim2.new(0.25, 0, 0.125, 0),
	SizeConstraint = Enum.SizeConstraint.RelativeXY,
	Visible = true,
	ZIndex = 2,
	Name = 'toggleFrame',
	Parent = exploitScreenGui
})

local toggleTextButton = CreateInstance('TextButton', {
	Font = Enum.Font.SourceSansBold,
	FontSize = Enum.FontSize.Size8,
	Text = 'tp: <font color= \"rgb(240, 40, 10)\">off</font>',
	TextColor3 = Color3.new(1, 1, 1),
	TextScaled = true,
	TextSize = 8,
	TextStrokeColor3 = Color3.new(0, 0, 0),
	TextStrokeTransparency = 0,
	TextTransparency = 0,
	TextWrapped = true,
	TextXAlignment = Enum.TextXAlignment.Center,
	TextYAlignment = Enum.TextYAlignment.Center,
	AutoButtonColor = true,
	Modal = false,
	Selected = false,
	Style = Enum.ButtonStyle.Custom,
	Active = true,
	AnchorPoint = Vector2.new(0, 0),
	BackgroundColor3 = Color3.new(0.180392, 0.180392, 0.180392),
	BackgroundTransparency = 0,
	BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843),
	BorderSizePixel = 1,
	ClipsDescendants = false,
	Draggable = false,
	Position = UDim2.new(0, 0, 0.25, 0),
	Rotation = 0,
	Selectable = false,
	Size = UDim2.new(1, 0, 0.75, 0),
	SizeConstraint = Enum.SizeConstraint.RelativeXY,
	Visible = true,
	ZIndex = 2,
	Name = 'toggleTextButton',
	Parent = toggleFrame,
	RichText = true
})

local dropshadowFrame = CreateInstance('Frame', {
	Style = Enum.FrameStyle.Custom,
	Active = false,
	AnchorPoint = Vector2.new(0, 0),
	BackgroundColor3 = Color3.new(0, 0, 0),
	BackgroundTransparency = 0,
	BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843),
	BorderSizePixel = 0,
	ClipsDescendants = false,
	Draggable = false,
	Position = UDim2.new(0, 0, 0, 6),
	Rotation = 0,
	Selectable = false,
	Size = UDim2.new(1, 0, 1, 0),
	SizeConstraint = Enum.SizeConstraint.RelativeXY,
	Visible = true,
	ZIndex = 1,
	Name = 'dropshadowFrame',
	Parent = toggleFrame
})

toggleTextButton.MouseButton1Click:Connect(function()
    if on == false then
        on = true
        toggleTextButton.RichText = true
        toggleTextButton.Text = 'tp: <font color= \"rgb(40, 240, 10)\">on</font>'
        
        wait()
    elseif on == true then
        on = false
        toggleTextButton.RichText = true
        toggleTextButton.Text = 'tp: <font color= \"rgb(240, 40, 10)\">off</font>'
        
        wait()
    end
end)

while wait() do
    if on == true then
        for teleportamount = 1, 20 do
            for checkpointamount, checkpoint in pairs(game.Workspace.Checkpoints:GetChildren()) do
                if tonumber(checkpoint.Name) == game.Players.LocalPlayer.leaderstats.Stage.Value + 1 then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(checkpoint.Position)
                    
                    wait()
                end
            end
        end
    end
end
